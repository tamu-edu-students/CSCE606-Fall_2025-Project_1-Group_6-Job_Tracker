<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mt-4">
    <h1 class="page-title mb-0">My Job Applications</h1>
    <%= link_to "New Job Application", new_job_path, class: "btn btn-outline-primary" %>
  </div>

  <hr>

  <div class="mb-3" data-controller="job-search">
    <div class="input-group">
      <input
        type="text"
        data-job-search-target="input"
        class="form-control"
        placeholder="Search jobs by title or company..."
      >
      <button
        type="button"
        data-action="click->job-search#search"
        class="btn btn-primary"
      >
        Search
      </button>
    </div>
  </div>

  <% if @jobs.any? %>
    <table class="table table-hover" id="jobs-table">
      <thead class="thead-dark">
        <tr>
          <th>
            <%= link_to "Title #{sort_indicator("title", params[:sort], params[:direction])}".html_safe,
                        jobs_path(sort: "title", direction: next_direction("title", params[:sort], params[:direction])),
                        data: { turbo_frame: "jobs_table" } %>
          </th>
          <th>
            <%= link_to "Company #{sort_indicator("company", params[:sort], params[:direction])}".html_safe,
                        jobs_path(sort: "company", direction: next_direction("company", params[:sort], params[:direction])),
                        data: { turbo_frame: "jobs_table" } %>
          </th>
          <th>
            <%= link_to "Status #{sort_indicator("status", params[:sort], params[:direction])}".html_safe,
                        jobs_path(sort: "status", direction: next_direction("status", params[:sort], params[:direction])),
                        data: { turbo_frame: "jobs_table" } %>
          </th>
          <th>
            <%= link_to "Deadline #{sort_indicator("deadline", params[:sort], params[:direction])}".html_safe,
                        jobs_path(sort: "deadline", direction: next_direction("deadline", params[:sort], params[:direction])),
                        data: { turbo_frame: "jobs_table" } %>
          </th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <%= render partial: "rows", locals: { jobs: @jobs } %>
      </tbody>
    </table>
  <% else %>
    <p>No job applications found.</p>
  <% end %>

  <div class="mt-4">
    <%= link_to "Return to Dashboard", dashboard_path, class: "btn btn-secondary" %>
  </div>
</div>
